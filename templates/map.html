<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyperion Navigator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <h1>Route van #{{ src }} naar {{dest_label}} met snelheid {{speed}} m/s.</h1>
    <h1>Route: {{route}}</h1>
    <h1>Time: {{time}}s</h1>

    <svg id="svg_2" style="background-image: url('{{ url_for('static', filename='images/2.jpg') }}');"></svg>
    <svg id="svg_1" style="background-image: url('{{ url_for('static', filename='images/1.jpg') }}');"></svg>
    <svg id="svg_0" style="background-image: url('{{ url_for('static', filename='images/BG.jpg') }}');"></svg>

    <script>
        const route = {{route}};
        console.log(route)
        const graph = {{graph}}
        console.log(graph)

        nodes = [
            { id: 0, x: null, y: null, z: 0 },
            { id: 1, x: null, y: null, z: 0 },
            { id: 2, x: null, y: null, z: 0 },
            { id: 3, x: null, y: null, z: 0 },
            { id: 4, x: null, y: null, z: 0 },
            { id: 5, x: null, y: null, z: 1 },
            { id: 6, x: null, y: null, z: 1 },
            { id: 7, x: null, y: null, z: 1 },
            { id: 8, x: null, y: null, z: 1 },
            { id: 9, x: null, y: null, z: 1 },
            { id: 10, x: null, y: null, z: 1 },
            { id: 11, x: null, y: null, z: 2 },
            { id: 12, x: null, y: null, z: 2 },
            { id: 13, x: null, y: null, z: 2 },
            { id: 14, x: null, y: null, z: 2 },
        ]

        const routeFloors = new Set(route.map(id => nodes.find(node => node.id === id)?.z));

        console.log(routeFloors)
        // Make SVGs visible if they are part of the route
        document.querySelectorAll("svg").forEach(svg => {
            const floor = parseInt(svg.id.split('_')[1], 10); // Extract floor number from id
            if (routeFloors.has(floor)) {
                svg.style.display = "block"; // Show SVG if in routeFloors
            }
        });    

    </script>
    <div id="tooltip"></div>
    <script src="{{ url_for('static', filename='js/tooltip.js') }}"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</body>
</html>